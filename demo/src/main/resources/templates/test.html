<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link href="./left.css" type="text/css" rel="stylesheet"/>
    <title>添加试卷</title>
    <div>
        <a href="http://127.0.0.1:8080/listShijuan">返回</a>
        <form id="List">
            年级：<input type="text" name="grade" size="10">
            科目：<input type="text" name="kemu" size="20">
            <input type="button" value="预选题目查询" onclick="lists()">
            <br>
        </form>
        <form id="AddShijuan">
            fdjkfnd<br>
                    <input type="radio" name="1" value="A">
                    <input type="radio" name="1" value="B">
                    <input type="radio" name="1" value="C">
                    <input type="radio" name="1" value="D">
            <input type="button" value="添加题目" onclick="Adds()">
        </form>
    </div>
</head>

<body>
<div class="parent">
    <div class="left">
        <p><a href="http://127.0.0.1:8080/index">首页</a></p>
        <p><a href="http://127.0.0.1:8080/listShijuan">编辑学生</a></p>
        <p><a href="http://127.0.0.1:8080/listTeacher">编辑老师</a></p>
        <p><a href="http://127.0.0.1:8080/listClazz">编辑班级</a></p>
        <p><a href="http://127.0.0.1:8080/listTiku">编辑题库</a></p>
        <p><a href="http://127.0.0.1:8080/listKemu">编辑科目</a></p>
        <p><a href="http://127.0.0.1:8080/listShijuan">编辑试卷</a></p>
        <p><a href="http://127.0.0.1:8080/listTeacherClazz">任课管理</a></p>
    </div>
    <div class="right">
        <p>
        <div id="Result" style="margin: 0px 0 0px 5%;"></div>
        </p>
    </div>
</div>
</body>
<script type="text/javascript"
        src="webjars/jquery/3.4.1/jquery.min.js"></script>
<script>
    function lists() {
        $.ajax({
            type: "POST",
            url: "ListTiku",
            data: $('#List').serialize(),
            dataType: "json",//类型
            success: function (msg) {
                var html = "<form id='Add'>";
                for (var i = 0; i < msg.length; i++) {
                    var ls = msg[i];
                    html += "<input type='checkbox' name='AddShijuan' value='" + ls.id + "'/>" + ls.question + "<br>";
                }
                html += "<input type='button' value='添加题目' onclick='Adds()'>";
                html += "</form>"
                $("#Result").html(html);
            },
            error: function () {
                alert("加载资源失败");
            }
        });
    };

</script>
<script>
    function Adds() {

        console.log($('#AddShijuan').serialize());
        var jsons=formatArray($('#AddShijuan').serializeArray(),"json");
        console.log(jsons);

        function formatArray(array, type) {
            var dataArray = {};
            $.each(array, function () {
                if (dataArray[this.name]) {
                    if (!dataArray[this.name].push) {
                        dataArray[this.name] = [dataArray[this.name]];
                    }
                    dataArray[this.name].push(this.value || '');
                } else {
                    dataArray[this.name] = this.value || '';
                }
            });
            return ((type == "json") ? JSON.stringify(dataArray) : dataArray);
        }

        $.ajax({
            type: "POST",
            url: "AddShijuan",
            data: $('#AddShijuan').serialize(),
            success: function (data) {
                if (data == "success") {
                    alert("添加成功");
                } else {
                    alert(data);
                }
            },
            error: function () {
                alert("添加失败");
            }
        });
    };
</script>

</html>